{"version":3,"sources":["webpack:///node_modules/rxjs/_esm2015/internal/observable/SubscribeOnObservable.js.pre-build-optimizer.js","webpack:///node_modules/rxjs/_esm2015/internal/operators/subscribeOn.js.pre-build-optimizer.js","webpack:///src/app/custom-elements/toc/toc.component.ts.pre-build-optimizer.js","webpack:///src/app/custom-elements/toc/toc.component.html","webpack:///src/app/custom-elements/toc/toc.component.ts","webpack:///src/app/custom-elements/toc/toc.module.ts","webpack:///src/app/custom-elements/toc/toc.module.ts.pre-build-optimizer.js"],"names":["SubscribeOnObservable_SubscribeOnObservable","source","asap","delayTime","scheduler","super","this","Object","isNumeric","a","schedule","subscriber","dispatch","delay","arg","add","subscribe","Observable","subscribeOn","arguments","length","undefined","lift","subscribeOn_SubscribeOnOperator","_c0","TocComponent_div_0_div_1_Template","rf","ctx","core","Vb","Gc","Tb","TocComponent_div_0_button_2_Template","_r95","Wb","dc","$event","vc","hc","toggle","Qb","ctx_r91","Cb","isCollapsed","Ab","Fb","TocComponent_div_0_ng_container_4_li_1_Template","ctx_r100","toc_r96","$implicit","i_r97","index","ctx_r98","Db","level","type","primaryMax","activeIndex","nc","title","mc","href","xc","content","wc","TocComponent_div_0_ng_container_4_Template","Sb","Ec","Rb","ctx_r92","TocComponent_div_0_button_5_Template","_r102","ctx_r93","TocComponent_div_0_Template","ctx_r89","tocList","TocComponent","toc_component_TocComponent","scrollService","elementRef","tocService","isEmbedded","onDestroy","Subject","nativeElement","className","indexOf","_createClass","key","value","_this2","pipe","takeUntil","itemCount","reduce","result","item","_this3","combineLatest","activeItemIndex","items","changes","startWith","_ref","e","toArray","p","offsetParent","eRect","getBoundingClientRect","pRect","top","bottom","scrollTop","clientHeight","next","canScroll","toTop","scrollToTop","ɵfac","t","Pb","scroll_service","k","toc_service","ɵcmp","Jb","selectors","viewQuery","_t","Lc","rc","ec","decls","vars","consts","template","directives","common","j","icon","encapsulation","__webpack_require__","d","__webpack_exports__","toc_module_TocModule","TocModule","_classCallCheck","customElementComponent","ɵmod","Nb","ɵinj","Mb","factory","imports","c","b"],"mappings":"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","file":"toc-toc-module-es5.8afb6664570994d226ab.js","sourcesContent":["import { Observable } from '../Observable';\nimport { asap } from '../scheduler/asap';\nimport { isNumeric } from '../util/isNumeric';\nexport class SubscribeOnObservable extends Observable {\n    constructor(source, delayTime = 0, scheduler = asap) {\n        super();\n        this.source = source;\n        this.delayTime = delayTime;\n        this.scheduler = scheduler;\n        if (!isNumeric(delayTime) || delayTime < 0) {\n            this.delayTime = 0;\n        }\n        if (!scheduler || typeof scheduler.schedule !== 'function') {\n            this.scheduler = asap;\n        }\n    }\n    static create(source, delay = 0, scheduler = asap) {\n        return new SubscribeOnObservable(source, delay, scheduler);\n    }\n    static dispatch(arg) {\n        const { source, subscriber } = arg;\n        return this.add(source.subscribe(subscriber));\n    }\n    _subscribe(subscriber) {\n        const delay = this.delayTime;\n        const source = this.source;\n        const scheduler = this.scheduler;\n        return scheduler.schedule(SubscribeOnObservable.dispatch, delay, {\n            source, subscriber\n        });\n    }\n}\n//# sourceMappingURL=SubscribeOnObservable.js.map","import { SubscribeOnObservable } from '../observable/SubscribeOnObservable';\nexport function subscribeOn(scheduler, delay = 0) {\n    return function subscribeOnOperatorFunction(source) {\n        return source.lift(new SubscribeOnOperator(scheduler, delay));\n    };\n}\nclass SubscribeOnOperator {\n    constructor(scheduler, delay) {\n        this.scheduler = scheduler;\n        this.delay = delay;\n    }\n    call(subscriber, source) {\n        return new SubscribeOnObservable(source, this.delay, this.scheduler).subscribe(subscriber);\n    }\n}\n//# sourceMappingURL=subscribeOn.js.map","import { Component, ViewChildren } from '@angular/core';\nimport { asapScheduler, combineLatest, Subject } from 'rxjs';\nimport { startWith, subscribeOn, takeUntil } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"app/shared/scroll.service\";\nimport * as i2 from \"app/shared/toc.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/icon\";\nconst _c0 = [\"tocItem\"];\nfunction TocComponent_div_0_div_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 7);\n    i0.ɵɵtext(1, \" \\u76EE\\u5F55 \");\n    i0.ɵɵelementEnd();\n} }\nfunction TocComponent_div_0_button_2_Template(rf, ctx) { if (rf & 1) {\n    const _r95 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function TocComponent_div_0_button_2_Template_button_click_0_listener($event) { i0.ɵɵrestoreView(_r95); const ctx_r94 = i0.ɵɵnextContext(2); return ctx_r94.toggle(false); });\n    i0.ɵɵtext(1, \" \\u76EE\\u5F55 \");\n    i0.ɵɵelement(2, \"mat-icon\", 9);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r91 = i0.ɵɵnextContext(2);\n    i0.ɵɵattribute(\"aria-pressed\", !ctx_r91.isCollapsed);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"collapsed\", ctx_r91.isCollapsed);\n} }\nfunction TocComponent_div_0_ng_container_4_li_1_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\", 11, 12);\n    i0.ɵɵelement(2, \"a\", 13);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r100 = i0.ɵɵnextContext();\n    const toc_r96 = ctx_r100.$implicit;\n    const i_r97 = ctx_r100.index;\n    const ctx_r98 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassMap(toc_r96.level);\n    i0.ɵɵclassProp(\"secondary\", ctx_r98.type === \"EmbeddedExpandable\" && i_r97 >= ctx_r98.primaryMax);\n    i0.ɵɵclassProp(\"active\", i_r97 === ctx_r98.activeIndex);\n    i0.ɵɵpropertyInterpolate(\"title\", toc_r96.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"href\", toc_r96.href, i0.ɵɵsanitizeUrl)(\"innerHTML\", toc_r96.content, i0.ɵɵsanitizeHtml);\n} }\nfunction TocComponent_div_0_ng_container_4_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TocComponent_div_0_ng_container_4_li_1_Template, 3, 8, \"li\", 10);\n    i0.ɵɵelementContainerEnd();\n} if (rf & 2) {\n    const toc_r96 = ctx.$implicit;\n    const ctx_r92 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r92.type === \"Floating\" || toc_r96.level !== \"h1\");\n} }\nfunction TocComponent_div_0_button_5_Template(rf, ctx) { if (rf & 1) {\n    const _r102 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function TocComponent_div_0_button_5_Template_button_click_0_listener($event) { i0.ɵɵrestoreView(_r102); const ctx_r101 = i0.ɵɵnextContext(2); return ctx_r101.toggle(); });\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r93 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"collapsed\", ctx_r93.isCollapsed);\n    i0.ɵɵattribute(\"aria-pressed\", !ctx_r93.isCollapsed);\n} }\nfunction TocComponent_div_0_Template(rf, ctx) { if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 1);\n    i0.ɵɵtemplate(1, TocComponent_div_0_div_1_Template, 2, 0, \"div\", 2);\n    i0.ɵɵtemplate(2, TocComponent_div_0_button_2_Template, 3, 2, \"button\", 3);\n    i0.ɵɵelementStart(3, \"ul\", 4);\n    i0.ɵɵtemplate(4, TocComponent_div_0_ng_container_4_Template, 2, 1, \"ng-container\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, TocComponent_div_0_button_5_Template, 1, 2, \"button\", 6);\n    i0.ɵɵelementEnd();\n} if (rf & 2) {\n    const ctx_r89 = i0.ɵɵnextContext();\n    i0.ɵɵclassProp(\"collapsed\", ctx_r89.isCollapsed);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r89.type === \"EmbeddedSimple\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r89.type === \"EmbeddedExpandable\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"embedded\", ctx_r89.type !== \"Floating\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r89.tocList);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r89.type === \"EmbeddedExpandable\");\n} }\nexport class TocComponent {\n    constructor(scrollService, elementRef, tocService) {\n        this.scrollService = scrollService;\n        this.tocService = tocService;\n        this.activeIndex = null;\n        this.type = 'None';\n        this.isCollapsed = true;\n        this.isEmbedded = false;\n        this.onDestroy = new Subject();\n        this.primaryMax = 4;\n        this.isEmbedded = elementRef.nativeElement.className.indexOf('embedded') !== -1;\n    }\n    ngOnInit() {\n        this.tocService.tocList\n            .pipe(takeUntil(this.onDestroy))\n            .subscribe(tocList => {\n            this.tocList = tocList;\n            const itemCount = count(this.tocList, item => item.level !== 'h1');\n            this.type = (itemCount > 0) ?\n                this.isEmbedded ?\n                    (itemCount > this.primaryMax) ?\n                        'EmbeddedExpandable' :\n                        'EmbeddedSimple' :\n                    'Floating' :\n                'None';\n        });\n    }\n    ngAfterViewInit() {\n        if (!this.isEmbedded) {\n            // We use the `asap` scheduler because updates to `activeItemIndex` are triggered by DOM changes,\n            // which, in turn, are caused by the rendering that happened due to a ChangeDetection.\n            // Without asap, we would be updating the model while still in a ChangeDetection handler, which is disallowed by Angular.\n            combineLatest([\n                this.tocService.activeItemIndex.pipe(subscribeOn(asapScheduler)),\n                this.items.changes.pipe(startWith(this.items)),\n            ])\n                .pipe(takeUntil(this.onDestroy))\n                .subscribe(([index, items]) => {\n                this.activeIndex = index;\n                if (index === null || index >= items.length) {\n                    return;\n                }\n                const e = items.toArray()[index].nativeElement;\n                const p = e.offsetParent;\n                const eRect = e.getBoundingClientRect();\n                const pRect = p.getBoundingClientRect();\n                const isInViewport = (eRect.top >= pRect.top) && (eRect.bottom <= pRect.bottom);\n                if (!isInViewport) {\n                    p.scrollTop += (eRect.top - pRect.top) - (p.clientHeight / 2);\n                }\n            });\n        }\n    }\n    ngOnDestroy() {\n        this.onDestroy.next();\n    }\n    toggle(canScroll = true) {\n        this.isCollapsed = !this.isCollapsed;\n        if (canScroll && this.isCollapsed) {\n            this.toTop();\n        }\n    }\n    toTop() {\n        this.scrollService.scrollToTop();\n    }\n}\nTocComponent.ɵfac = function TocComponent_Factory(t) { return new (t || TocComponent)(i0.ɵɵdirectiveInject(i1.ScrollService), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i2.TocService)); };\nTocComponent.ɵcmp = i0.ɵɵdefineComponent({ type: TocComponent, selectors: [[\"aio-toc\"]], viewQuery: function TocComponent_Query(rf, ctx) { if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, true);\n    } if (rf & 2) {\n        var _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.items = _t);\n    } }, decls: 1, vars: 1, consts: [[\"class\", \"toc-inner no-print\", 3, \"collapsed\", 4, \"ngIf\"], [1, \"toc-inner\", \"no-print\"], [\"class\", \"toc-heading embedded\", 4, \"ngIf\"], [\"type\", \"button\", \"class\", \"toc-heading embedded secondary\", \"title\", \"Expand/collapse contents\", \"aria-label\", \"Expand/collapse contents\", 3, \"click\", 4, \"ngIf\"], [1, \"toc-list\"], [4, \"ngFor\", \"ngForOf\"], [\"type\", \"button\", \"class\", \"toc-more-items embedded material-icons\", \"title\", \"Expand/collapse contents\", \"aria-label\", \"Expand/collapse contents\", 3, \"collapsed\", \"click\", 4, \"ngIf\"], [1, \"toc-heading\", \"embedded\"], [\"type\", \"button\", \"title\", \"Expand/collapse contents\", \"aria-label\", \"Expand/collapse contents\", 1, \"toc-heading\", \"embedded\", \"secondary\", 3, \"click\"], [\"svgIcon\", \"keyboard_arrow_right\", 1, \"rotating-icon\"], [3, \"title\", \"class\", \"secondary\", \"active\", 4, \"ngIf\"], [3, \"title\"], [\"tocItem\", \"\"], [3, \"href\", \"innerHTML\"], [\"type\", \"button\", \"title\", \"Expand/collapse contents\", \"aria-label\", \"Expand/collapse contents\", 1, \"toc-more-items\", \"embedded\", \"material-icons\", 3, \"click\"]], template: function TocComponent_Template(rf, ctx) { if (rf & 1) {\n        i0.ɵɵtemplate(0, TocComponent_div_0_Template, 6, 6, \"div\", 0);\n    } if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.type !== \"None\");\n    } }, directives: [i3.NgIf, i3.NgForOf, i4.MatIcon], encapsulation: 2 });\n/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(TocComponent, [{\n        type: Component,\n        args: [{\n                selector: 'aio-toc',\n                templateUrl: 'toc.component.html',\n                styles: []\n            }]\n    }], function () { return [{ type: i1.ScrollService }, { type: i0.ElementRef }, { type: i2.TocService }]; }, { items: [{\n            type: ViewChildren,\n            args: ['tocItem']\n        }] }); })();\nfunction count(array, fn) {\n    return array.reduce((result, item) => fn(item) ? result + 1 : result, 0);\n}\n","<div *ngIf=\"type !== 'None'\" class=\"toc-inner no-print\" [class.collapsed]=\"isCollapsed\">\n\n  <div *ngIf=\"type === 'EmbeddedSimple'\" class=\"toc-heading embedded\">\n    目录\n  </div>\n\n  <button *ngIf=\"type === 'EmbeddedExpandable'\" type=\"button\" (click)=\"toggle(false)\"\n    class=\"toc-heading embedded secondary\"\n    title=\"Expand/collapse contents\"\n    aria-label=\"Expand/collapse contents\"\n    [attr.aria-pressed]=\"!isCollapsed\">\n    目录\n    <mat-icon class=\"rotating-icon\" svgIcon=\"keyboard_arrow_right\" [class.collapsed]=\"isCollapsed\"></mat-icon>\n  </button>\n\n  <ul class=\"toc-list\" [class.embedded]=\"type !== 'Floating'\">\n    <ng-container *ngFor=\"let toc of tocList; let i = index\">\n      <li #tocItem title=\"{{toc.title}}\" *ngIf=\"type === 'Floating' || toc.level !== 'h1'\"\n        class=\"{{toc.level}}\" [class.secondary]=\"type === 'EmbeddedExpandable' && i >= primaryMax\" [class.active]=\"i === activeIndex\">\n        <a [href]=\"toc.href\" [innerHTML]=\"toc.content\"></a>\n      </li>\n    </ng-container>\n  </ul>\n\n  <button *ngIf=\"type === 'EmbeddedExpandable'\" type=\"button\" (click)=\"toggle()\"\n    class=\"toc-more-items embedded material-icons\" [class.collapsed]=\"isCollapsed\"\n    title=\"Expand/collapse contents\"\n    aria-label=\"Expand/collapse contents\"\n    [attr.aria-pressed]=\"!isCollapsed\">\n  </button>\n</div>\n","import { AfterViewInit, Component, ElementRef, OnDestroy, OnInit, QueryList, ViewChildren } from '@angular/core';\nimport { asapScheduler, combineLatest, Subject } from 'rxjs';\nimport { startWith, subscribeOn, takeUntil } from 'rxjs/operators';\n\nimport { ScrollService } from 'app/shared/scroll.service';\nimport { TocItem, TocService } from 'app/shared/toc.service';\n\ntype TocType = 'None' | 'Floating' | 'EmbeddedSimple' | 'EmbeddedExpandable';\n\n@Component({\n  selector: 'aio-toc',\n  templateUrl: 'toc.component.html',\n  styles: []\n})\nexport class TocComponent implements OnInit, AfterViewInit, OnDestroy {\n\n  activeIndex: number | null = null;\n  type: TocType = 'None';\n  isCollapsed = true;\n  isEmbedded = false;\n  @ViewChildren('tocItem') private items: QueryList<ElementRef>;\n  private onDestroy = new Subject();\n  primaryMax = 4;\n  tocList: TocItem[];\n\n  constructor(\n    private scrollService: ScrollService,\n    elementRef: ElementRef,\n    private tocService: TocService) {\n    this.isEmbedded = elementRef.nativeElement.className.indexOf('embedded') !== -1;\n  }\n\n  ngOnInit() {\n    this.tocService.tocList\n        .pipe(takeUntil(this.onDestroy))\n        .subscribe(tocList => {\n          this.tocList = tocList;\n          const itemCount = count(this.tocList, item => item.level !== 'h1');\n\n          this.type = (itemCount > 0) ?\n                        this.isEmbedded ?\n                          (itemCount > this.primaryMax) ?\n                            'EmbeddedExpandable' :\n                          'EmbeddedSimple' :\n                        'Floating' :\n                      'None';\n        });\n  }\n\n  ngAfterViewInit() {\n    if (!this.isEmbedded) {\n      // We use the `asap` scheduler because updates to `activeItemIndex` are triggered by DOM changes,\n      // which, in turn, are caused by the rendering that happened due to a ChangeDetection.\n      // Without asap, we would be updating the model while still in a ChangeDetection handler, which is disallowed by Angular.\n      combineLatest([\n        this.tocService.activeItemIndex.pipe(subscribeOn(asapScheduler)),\n        this.items.changes.pipe(startWith(this.items)),\n      ])\n          .pipe(takeUntil(this.onDestroy))\n          .subscribe(([index, items]) => {\n            this.activeIndex = index;\n            if (index === null || index >= items.length) {\n              return;\n            }\n\n            const e = items.toArray()[index].nativeElement;\n            const p = e.offsetParent;\n\n            const eRect = e.getBoundingClientRect();\n            const pRect = p.getBoundingClientRect();\n\n            const isInViewport = (eRect.top >= pRect.top) && (eRect.bottom <= pRect.bottom);\n\n            if (!isInViewport) {\n              p.scrollTop += (eRect.top - pRect.top) - (p.clientHeight / 2);\n            }\n          });\n    }\n  }\n\n  ngOnDestroy() {\n    this.onDestroy.next();\n  }\n\n  toggle(canScroll = true) {\n    this.isCollapsed = !this.isCollapsed;\n    if (canScroll && this.isCollapsed) { this.toTop(); }\n  }\n\n  toTop() {\n    this.scrollService.scrollToTop();\n  }\n}\n\nfunction count<T>(array: T[], fn: (item: T) => boolean) {\n  return array.reduce((result, item) => fn(item) ? result + 1 : result, 0);\n}\n","import { NgModule, Type } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatIconModule } from '@angular/material/icon';\nimport { WithCustomElementComponent } from '../element-registry';\nimport { TocComponent } from './toc.component';\n\n@NgModule({\n  imports: [ CommonModule, MatIconModule ],\n  declarations: [ TocComponent ],\n  entryComponents: [ TocComponent ],\n})\nexport class TocModule implements WithCustomElementComponent {\n  customElementComponent: Type<any> = TocComponent;\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { MatIconModule } from '@angular/material/icon';\nimport { TocComponent } from './toc.component';\nimport * as i0 from \"@angular/core\";\nexport class TocModule {\n    constructor() {\n        this.customElementComponent = TocComponent;\n    }\n}\nTocModule.ɵmod = i0.ɵɵdefineNgModule({ type: TocModule });\nTocModule.ɵinj = i0.ɵɵdefineInjector({ factory: function TocModule_Factory(t) { return new (t || TocModule)(); }, imports: [[CommonModule, MatIconModule]] });\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && i0.ɵɵsetNgModuleScope(TocModule, { declarations: [TocComponent], imports: [CommonModule, MatIconModule] }); })();\n/*@__PURE__*/ (function () { i0.ɵsetClassMetadata(TocModule, [{\n        type: NgModule,\n        args: [{\n                imports: [CommonModule, MatIconModule],\n                declarations: [TocComponent],\n                entryComponents: [TocComponent],\n            }]\n    }], null, null); })();\n"]}